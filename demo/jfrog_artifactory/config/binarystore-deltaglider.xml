<?xml version="1.0" encoding="UTF-8"?>
<!--
  Artifactory Binary Store Configuration - DELTAGLIDER (via DeltaGlider Proxy)

  This configuration routes artifacts through DeltaGlider Proxy before
  storing in MinIO. DeltaGlider applies delta compression to similar files.

  Usage:
    1. Copy to Artifactory: /var/opt/jfrog/artifactory/etc/binarystore.xml
    2. Restart Artifactory

  Note: DeltaGlider Proxy must be running and accessible at deltaglider:9002
-->
<config version="2">
    <chain template="s3-storage-v3-direct"/>
    <provider id="s3-storage-v3" type="s3-storage-v3">
        <!-- Point to DeltaGlider Proxy instead of MinIO directly -->
        <!-- Point to DeltaGlider on host machine (host.docker.internal for Docker Desktop) -->
        <endpoint>http://host.docker.internal:9012</endpoint>
        <!-- DeltaGlider uses "default" as its bucket name -->
        <bucketName>default</bucketName>
        <identity>minio</identity>
        <credential>minio123</credential>
        <region>us-east-1</region>
        <path>artifactory-filestore</path>
        <enablePathStyleAccess>true</enablePathStyleAccess>
        <useInstanceCredentials>false</useInstanceCredentials>
        <testConnection>false</testConnection>
        <!-- Force HTTP instead of HTTPS -->
        <httpsOnly>false</httpsOnly>
        <useHttp>true</useHttp>
        <port>9012</port>
        <!-- Disable chunked encoding to use simple PUT -->
        <disableChunkedEncoding>true</disableChunkedEncoding>
    </provider>
</config>
